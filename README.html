<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏´‡∏°‡∏≤‡∏Å‡∏Æ‡∏≠‡∏™‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ + ‡πÅ‡∏°‡πà‡∏Æ‡∏≠‡∏™ + ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<style>
  html,body{margin:0;padding:0;height:100vh;overflow:hidden;background:#111;color:#fff;display:flex;flex-direction:column;align-items:center;}
  h1,p{margin:1vh 0 .5vh;font-size:4.5vw;}
  table{border-collapse:collapse;width:96vw;height:96vw;max-width:96vh;max-height:96vh;}
  td{width:12.5%;height:12.5%;text-align:center;vertical-align:middle;font-size:6vw;transition:background .2s;position:relative;}
  .white{background:#f0d9b5;}
  .black{background:#b58863;}
  .piece{position:absolute;top:5%;left:5%;width:90%;height:90%;border-radius:50%;transition:transform .3s;}
  .player{background:#e74c3c;box-shadow:0 0 .2em #c0392b;}
  .bot{background:#2ecc71;box-shadow:0 0 .2em #27ae60;}
  .king:before{content:"";position:absolute;top:20%;left:20%;width:60%;height:60%;border-radius:50%;background:rgba(255,255,255,0.4);}
  .selected::after{content:"";position:absolute;inset:0;border:3px solid yellow;border-radius:50%;}
  #message{margin-top:1vh;font-size:3.5vw;color:gold;}
</style>
</head>
<body>
<h1>‡∏´‡∏°‡∏≤‡∏Å‡∏Æ‡∏≠‡∏™‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‚ôï</h1><p>üî¥ ‡∏Ñ‡∏∏‡∏ì vs üü¢ ‡∏ö‡∏≠‡∏ó</p>
<table id="board"></table><div id="message"></div>

<script>
// --- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö ---
const SFX = {};
['walk','eat','crown','turn','win'].forEach(n => {
  const a = new Audio();
  a.src = n+'.mp3'; // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
  SFX[n] = a;
});

// --- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å ---
const SIZE=8,board=[],table=document.getElementById('board'),msg=document.getElementById('message');
let turn='P', selected=null, history=[], mustContinue=false;

// --- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô+‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏° ---
function createBoard(){
  for(let r=0;r<SIZE;r++){
    board[r]=[];
    for(let c=0;c<SIZE;c++){
      board[r][c]=(r<3 && (r+c)%2? 'B': r>4 && (r+c)%2? 'P':'');
    }
  }
  drawBoard();
}
function drawBoard(){
  table.innerHTML='';
  for(let r=0;r<SIZE;r++){ const row=table.insertRow();
    for(let c=0;c<SIZE;c++){
      const cell=row.insertCell(), piece=board[r][c];
      cell.className=(r+c)%2?'black':'white';
      cell.onclick=()=>clickCell(r,c);
      if(piece){
        const div=document.createElement('div');
        div.classList.add('piece', piece==='P'?'player':'bot');
        if(piece==='p' || piece==='b') div.classList.add('king');
        if(selected?.r===r && selected?.c===c) div.classList.add('selected');
        cell.appendChild(div);
      }
    }
  }
}

// --- ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏°‡∏≤‡∏Å ---
function clickCell(r,c){
  if(turn!=='P') return;
  const piece=board[r][c];
  const eatMoves=mustEatMoves('P');
  if(piece.toUpperCase()==='P'){
    if(mustContinue && !(selected && selected.r===r && selected.c===c)) return;
    selected={r,c}; msg.innerText=''; drawBoard();
    SFX.turn.play();
  } else if(selected){
    const moves=legalMovesFor(selected.r,selected.c,'P');
    const target=moves.find(m=>m.r===r && m.c===c);
    if(!target) return;
    if(eatMoves.length && target.kind!=='eat'){
      msg.innerText='‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô!';
      return;
    }
    makeMove(selected, target);
  }
}

// --- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ---
function legalMovesFor(r,c,pl){
  const dirs=pl==='P'?[[-1,-1],[-1,1],[1,-1],[1,1]]:[[1,-1],[1,1],[-1,-1],[-1,1]];
  const arr=[];
  for(const [dr,dc]of dirs){
    const nr=r+dr, nc=c+dc;
    if(inB(nr,nc) && board[nr][nc]==='') arr.push({r:nr,c:nc,kind:'move'});
    const jr=r+2*dr, jc=c+2*dc;
    if(inB(jr,jc)&&board[nr][nc]&&(board[nr][nc].toUpperCase()!==pl)&&board[jr][jc]===''){
      arr.push({r:jr,c:jc,kind:'eat'});
    }
  }
  return arr;
}
function mustEatMoves(pl){
  const arr=[];
  for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){
    if(board[r][c].toUpperCase()===pl){
      legalMovesFor(r,c,pl).filter(m=>m.kind==='eat').forEach(m=>arr.push({from:{r,c},...m}));
    }
  }
  return arr;
}

// --- ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô ---
function makeMove(from, to){
  const pr=from.r, pc=from.c, tr=to.r, tc=to.c;
  const piece=board[pr][pc];
  board[pr][pc]='';
  board[tr][tc]=piece;
  SFX.walk.play();
  drawBoard();
  if(to.kind==='eat'){ const mr=(pr+tr)/2, mc=(pc+tc)/2; board[mr][mc]=''; SFX.eat.play(); }
  // ‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏°‡πà‡∏Æ‡∏≠‡∏™
  const isKingTarget = (piece==='P'&&tr===0)||(piece==='B'&&tr===SIZE-1);
  if(isKingTarget){
    board[tr][tc]= piece==='P'?'p':'b';
    SFX.crown.play(); msg.innerText='üëë ‡πÅ‡∏°‡πà‡∏Æ‡∏≠‡∏™‡πÅ‡∏•‡πâ‡∏ß!';
  }
  // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
  if(to.kind==='eat'){
    const cont=legalMovesFor(tr,tc,piece).filter(m=>m.kind==='eat');
    if(cont.length){ turn='P'; selected={r:tr,c:tc}; mustContinue=true; drawBoard(); return; }
  }
  // ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏ö‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô
  selected=null; mustContinue=false; msg.innerText='';
  turn='B'; SFX.turn.play(); setTimeout(botTurn,300);
}

// --- ‡∏ö‡∏≠‡∏ó‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏°‡πà‡∏Æ‡∏≠‡∏™---
function botTurn(){
  const moves=generateMoves('B');
  if(!moves.length){ alert('üéâ ‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡πâ‡∏ß!'); SFX.win.play(); return; }
  moves.sort((a,b)=>b.score-a.score);
  makeBotMove(moves[0]);
}

function generateMoves(pl){
  const arr=[];
  for(let r=0;r<SIZE;r++)for(let c=0;c<SIZE;c++){
    if(board[r][c].toUpperCase()===pl)
      legalMovesFor(r,c,pl).forEach(m=>{
        const copyB=board.map(r=>r.slice());
        copyB[r][c]=''; copyB[m.r][m.c]=board[r][c];
        if(m.kind==='eat'){ const mr=(r+m.r)/2, mc=(c+m.c)/2; copyB[mr][mc]=''; }
        arr.push({board:copyB,score:(m.kind==='eat'?10:1)+Math.random(),from:{r,c},to:m});
      });
  }
  return arr;
}
function makeBotMove(m){
  board.splice(0,SIZE,...m.board); drawBoard();
  turn='P';
  SFX.walk.play();
}

// --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ---
function inB(r,c){ return r>=0&&c>=0&&r<SIZE&&c<SIZE; }

// --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏° ---
createBoard();
</script>
</body>
</html>